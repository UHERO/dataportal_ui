<div>
  <label class="form-check-inline">
    <input type="checkbox" (change)="yoyActive($event)">Year/Year
  </label>
  <label class="form-check-inline">
    <input type="checkbox" (change)="ytdActive($event)">Year-to-Date
  </label>
</div>

<div class="analyzer-table">
  <div class="table-row">
    <div class="table" #tableScroll>
      <table *ngIf="series && series.length">
        <tr>
          <th class="empty-header">&nbsp;</th>
          <ng-template ngFor let-date [ngForOf]="tableDates" let-i="index">
            <td><b>{{date.tableDate}}</b></td>
          </ng-template>
        </tr>
        <ng-template ngFor let-serie [ngForOf]="series" let-i="index">
          <tr>
            <th title="{{serie.title}}">
              <i class="material-icons analyze-button remove-button" title="Remove from Analyzer" (click)="updateAnalyze(serie)">&#xE872;</i>
              <i class="material-icons analyze-chart color{{serie.id}}" (click)="updateChart(serie)">{{ serie.showInChart ? '&#xE834;' : '&#xE835;'}}</i>
              <a [routerLink]="['/series']" [queryParams]="{ id: serie.id, sa: serie.saParam }" queryParamsHandling='merge' (click)="hideInfo(serie.id)">
                  {{serie.tablePrefix + serie.title + serie.tablePostfix + ' (' + serie.frequencyShort + ', ' + serie.geography.handle + ')'}}
              </a>
              <a tabindex="0" id="{{serie.id}}" class="info" (click)="showPopover(serie)" role="button" data-animation='false' data-toggle="popover">
								<i class="material-icons info-icon">&#xE88F;</i>
							</a>
            </th>
            <ng-template ngFor let-item [ngForOf]="serie.analyzerTableDisplay">
              <td>{{item.formattedValue}}</td>
            </ng-template>
          </tr>
          <tr *ngIf="yoyChecked">
            <th>
              {{(serie.percent) ? '&emsp; YOY (ch.)' : '&emsp; YOY (%)'}}
            </th>
            <ng-template ngFor let-item [ngForOf]="serie.analyzerTableDisplay">
              <td>{{item.formattedYoy}}</td>
            </ng-template>
          </tr>
          <tr *ngIf="c5maChecked">
            <th>
              C5MA
            </th>
            <ng-template ngFor let-item [ngForOf]="serie.analyzerTableDisplay">
              <td>{{item.formattedC5ma}}</td>
            </ng-template>
          </tr>
          <tr *ngIf="ytdChecked">
            <th>
              {{(serie.percent)? '&emsp; YTD (ch.)' : '&emsp; YTD (%)'}}
            </th>
            <ng-template ngFor let-item [ngForOf]="serie.analyzerTableDisplay">
              <td>{{item.formattedYtd}}</td>
            </ng-template>
          </tr>
        </ng-template>
      </table>
    </div>
  </div>
</div>
<div class="analyzer-summary-stats">
  <table>
    <tr>
      <th class="empty-header">&nbsp;</th>
      <th>Minimum Value</th>
      <th>Maximum Value</th>
      <th>% Change over Selected Range</th>
      <th>Change over Selected Range</th>
    </tr>
    <ng-template ngFor let-serie [ngForOf]="series">
      <tr>
        <td class="series-title" title="{{serie.title}}">
          <i class="material-icons analyze-button remove-button" title="Remove from Analyzer" (click)="updateAnalyze(serie)">&#xE872;</i>
          <i class="material-icons analyze-chart color{{serie.id}}" (click)="updateChart(serie)">{{ serie.showInChart ? '&#xE834;' : '&#xE835;'}}</i>
          <a [routerLink]="['/series']" [queryParams]="{ id: serie.id, sa: serie.saParam }" queryParamsHandling='merge'>
            {{serie.tablePrefix + serie.title + serie.tablePostfix + ' (' + serie.frequencyShort + ', ' + serie.geography.handle + ')'}}
          </a>
        </td>
        <td>{{serie.summaryStats.minValue + ' (' + serie.summaryStats.minValueDate + ')'}}</td>
        <td>{{serie.summaryStats.maxValue + ' (' + serie.summaryStats.maxValueDate + ')'}}</td>
        <td>{{!serie.percent ? serie.summaryStats.percChange : '&nbsp;'}}</td>
        <td>{{serie.summaryStats.levelChange}}</td>
      </tr>
    </ng-template>
  </table>
</div>