<div>
  <label class="form-check-inline">
    <input type="checkbox" (change)="yoyActive($event)">Year/Year
  </label>
  <label class="form-check-inline">
    <input type="checkbox" (change)="ytdActive($event)">Year-to-Date
  </label>
</div>

<div class="analyzer-table">
  <div class="table-row">
    <div class="table" #tableScroll>
      <table *ngIf="series && series.length">
        <tr>
          <th class="empty-header">&nbsp;</th>
          <ng-template ngFor let-date [ngForOf]="tableDates" let-i="index">
            <td><b>{{date.tableDate}}</b></td>
          </ng-template>
        </tr>
        <ng-template ngFor let-serie [ngForOf]="series" let-i="index">
          <tr>
            <th title="{{serie.title}}">
              <i class="fa fa-minus-square analyze-button" aria-hidden="true" (click)="updateAnalyze(serie)"></i>
              <i id="color{{serie.id}}" class="material-icons md-18 analyze-chart" (click)="updateChart(serie)">show_chart</i>
              <a [routerLink]="['/series']" [queryParams]="{ id: serie.id, sa: serie.saParam }" queryParamsHandling='merge' (click)="hideInfo(serie.id)">
                  {{serie.tablePrefix + serie.title + serie.tablePostfix + ' (' + serie.frequencyShort + ', ' + serie.geography.handle + ')'}}
              </a>
              <a tabindex="0" id="{{serie.id}}" class="info" (click)="showPopover(serie)"
								role="button" data-animation='false' data-toggle="popover">
								<i class="material-icons info-icon">&#xE88F;</i>
							</a>
            </th>
            <ng-template ngFor let-item [ngForOf]="serie.analyzerTableDisplay">
              <td>{{item.value}}</td>
            </ng-template>
          </tr>
          <tr *ngIf="yoyChecked">
            <th>
              {{(serie.percent) ? '&emsp; YOY (ch.)' : '&emsp; YOY (%)'}}
            </th>
            <ng-template ngFor let-item [ngForOf]="serie.analyzerTableDisplay">
              <td>{{item.yoy}}</td>
            </ng-template>
          </tr>
          <tr *ngIf="c5maChecked">
            <th>
              C5MA
            </th>
            <ng-template ngFor let-item [ngForOf]="serie.analyzerTableDisplay">
              <td>{{item.c5ma}}</td>
            </ng-template>
          </tr>
          <tr *ngIf="ytdChecked">
            <th>
              {{(serie.percent)? '&emsp; YTD (ch.)' : '&emsp; YTD (%)'}}
            </th>
            <ng-template ngFor let-item [ngForOf]="serie.analyzerTableDisplay">
              <td>{{item.ytd}}</td>
            </ng-template>
          </tr>
        </ng-template>
      </table>
    </div>
  </div>
</div>
<div class="analyzer-summary-stats">
  <ng-template ngFor let-serie [ngForOf]="series">
    <p>{{serie.tablePrefix + serie.title + serie.tablePostfix + ' (' + serie.frequencyShort + ', ' + serie.geography.handle + ')'}}</p>
    <p>{{serie.summaryStats.minValue + ' (' + serie.summaryStats.minValueDate + ')'}}</p>
    <p>{{serie.summaryStats.maxValue + ' (' + serie.summaryStats.maxValueDate + ')'}}</p>
    <p *ngIf="!serie.percent">{{'% Change over Selected Range: ' + serie.summaryStats.percChange}}</p>
    <p>{{'Change over Selected Range: ' + serie.summaryStats.levelChange}}</p>
  </ng-template>
</div>