<app-search-bar (onSearch)="onSearch($event)" class="search"></app-search-bar>
<div class="multi-series-container" (searchItem)="search(searchItem)">
  <h2 class="selected-category" id="id_top">{{selectedCategory}}</h2>
  <template ngFor let-sub [ngForOf]="sublist">
    <template ngFor let-series [ngForOf]="seriesData">
      <div class="multi-charts-row" *ngIf="sub['id'] === series['sublist']['id'] || routeSearch">
      <ul class="content-links" *ngIf="sublist.length > 1" [attr.id]="'id_' + series['sublist']['id']">
        <li *ngFor="let sub of sublist">
          <a [routerLink]="['/category']" [queryParams]="queryParams" [fragment]="sub['id']" (click)="scrollTo()" [class.currentSub]="sub['id'] === series['sublist']['id']">{{sub.name}}</a>
        </li>
      </ul>

      <hr class="sublist-separator" *ngIf="sublist.length > 1">
      <div class="chart-filters">
        <app-geo-selector [regions]="regions" [(selectedGeo)]="currentGeo" (selectedGeoChange)="redrawSeriesGeo($event)" class="selector"></app-geo-selector>
        <app-freq-selector [freqs]="freqs" [(selectedFreq)]="currentFreq" (selectedFreqChange)="redrawSeriesFreq($event)" class="selector"></app-freq-selector>
        <a [routerLink]="['/category/table']" [queryParams]="queryParams" class="switch-view">Table View <i class="material-icons md-18">view_list</i></a>
      </div>

      <template ngFor let-serie [ngForOf]="series['series']">
        <p *ngIf="!serie['seriesInfo']['id']"> No Data Available </p>
        <div *ngIf="serie['seriesInfo']['seasonallyAdjusted'] !== false" class="multi-charts">
          <a href="#" [routerLink]="['/series', serie['seriesInfo']['id']]" *ngIf="serie['seriesInfo']['id']">
            <app-highchart [seriesData]="serie" [currentFreq]="currentFreq"></app-highchart>
          </a>
        </div>
      </template>
      </div>
    </template>
  </template>
</div>